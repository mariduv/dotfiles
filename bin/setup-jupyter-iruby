#!/bin/bash
set -euo pipefail

opt=""
[ -w "$(gem env gemdir)" ] ||
  opt="--user-install"

case "$(uname -s)" in
  Darwin)
    brew install pkgconf
    ;;
esac

gem install $opt rubygems-requirements-system
gem install $opt iruby

iruby register --force

# libzmq should be installed, it may prompt for sudo
# be sure to add iruby to local gemfiles to use its features
