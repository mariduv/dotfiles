#!/usr/bin/env ruby
# frozen_string_literal: true

require 'bundler/inline'

gemfile do
  source 'https://rubygems.org'
  gem 'pry', '~> 0.13.1'
  gem 'pry-byebug'
  gem 'pry-inline'
end

def run
  if File.exist?(Bundler.unbundled_env.fetch('BUNDLE_GEMFILE', 'Gemfile'))
    Bundler.with_unbundled_env do
      Bundler.reset!
      yield
      exit
    end
  end
  yield
end

run do
  load Gem.bin_path('pry', 'pry')
end
