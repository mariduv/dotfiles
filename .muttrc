# IMAP
source ~/.mutt/roomag/config

macro index <f2> '<sync-mailbox><enter-command>source ~/.mutt/roomag/config<enter><change-folder>!<enter>' 'switch roomag'

source ~/.mutt/gpg2.rc
source `F=$HOME/.mutt/local; if [ ! -s "$F" ]; then F=/dev/null;fi;echo "$F"`

unset imap_passive
set imap_idle             = yes
set imap_check_subscribed = yes
set imap_keepalive        = 300
set imap_peek             = no
set mark_old              = no
set ssl_usesystemcerts    = yes

# Behavior
set beep            = no
set beep_new        = no
set mail_check      = 120
set move            = no
set pager_stop      = yes
set pager_context   = 2
set menu_scroll     = yes
set mailcap_path    = ~/.mutt/mailcap
set assumed_charset = "utf-8:iso8859-1"
set autoedit        = yes
set edit_headers    = yes
set editor          = "vim +'set tw=72 spell' +/^$ +noh ++1"
set strict_threads  = yes

set reverse_name    = yes
set envelope_from   = yes
set fast_reply      = yes
set include         = yes

set header_cache     = ~/.cache/mutt
set message_cachedir = ~/.cache/mutt

auto_view text/html
alternative_order text/plain text/html

bind generic \`  help
bind generic /   search
bind generic ?   search-reverse
bind generic n   search-next
bind generic N   search-opposite
bind generic \Cu half-up
bind generic \Cd half-down

bind index <F5> sync-mailbox
bind index gg   first-entry
bind index G    last-entry

bind pager J next-unread
bind pager K previous-unread

bind pager <F5>   sync-mailbox
bind pager <up>   previous-line
bind pager <down> next-line
bind pager gg     top
bind pager G      bottom

bind pager r reply
bind pager R group-reply
bind pager l list-reply

push <first-entry>

# Appearance
set sort              = reverse-threads
set sort_aux          = last-date
set sort_browser      = reverse-date
set status_on_top     = yes
set pager_index_lines = 7
set wrap              = -15
set markers           = no

set date_format   = "%m-%d %H:%M"
set index_format  = "%2C %Z %D  %-30.30F  %s"
set status_format = " %r Mutt: %f [N:%n%?d? D:%d?%?t? *:%t?] %>- (%s/%S) %P"

ignore *
unignore from date subject to cc
unignore organization organisation x-mailing-list: posted-to:

hdr_order subject from to cc date

# jellybeans-ish
color attachment color162 color233
color bold color183 color233
color hdrdefault color215 color233
color indicator brightwhite color234
color markers color215 color233
color message color188 color233
color normal color188 color233
color search brightgreen color233
color signature color222 color233
color status color30 color235
color tilde color244 color233
color tree color104 color233
# color underline brightmagenta color233
color error color167 color233

# Colours for items in the index
color index color188 color233 ~A
color index default color233 ~R
color index color110 color233 ~U
color index color213 color233 ~F
color index color217 color233 ~T
color index color126 color233 ~D

# Highlights inside message body

# URLs
color body color103 color233 "https?://[^ \"\t\r\n>]+"
color body color103 color233 "mailto:[^ \"\t\r\n>]+"

# Email addresses.
color body color103 color233 "[-a-z_0-9.%$+]+@[-a-z_0-9.]+\\.[-a-z][-a-z]+"

# Nested quotes
color quoted color107 color233
# color quoted1 color58 color233
# color quoted2 color244 color233

# diffs, maybe
color body color107 default "^[\+]+.*"
color body color167 default "^[\-]+.*"
